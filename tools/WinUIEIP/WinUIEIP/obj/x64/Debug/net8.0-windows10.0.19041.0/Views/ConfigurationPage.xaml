<Page x:Class="EulerLink.Views.ConfigurationPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    
    <ScrollViewer>
        <StackPanel Margin="20,16">
            <TextBlock Text="Configuration" Style="{StaticResource TitleTextBlockStyle}" Margin="0,0,0,16"/>

            <Border x:ConnectionId='2' x:Name="NotConnectedWarningBorder"
                    BorderBrush="#0066CC"
                    BorderThickness="2"
                    CornerRadius="4"
                    Background="#E6F2FF"
                    Padding="12"
                    Margin="0,0,0,16"
                    Visibility="Collapsed">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="ℹ️" FontSize="20" Margin="0,0,8,0" VerticalAlignment="Center"/>
                    <TextBlock Text="Not connected to device. Please connect to a device in the sidebar to view and configure settings."
                               FontWeight="SemiBold"
                               Foreground="#003366"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Border>

            <StackPanel x:ConnectionId='3' x:Name="ConfigurationContentPanel">
            <Border BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" 
                    BorderThickness="1" 
                    CornerRadius="4" 
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    Padding="0"
                    Margin="0,0,0,16">
                <StackPanel>
                    <TextBlock Text="Network Configuration" 
                               FontWeight="SemiBold" 
                               FontSize="16" 
                               Margin="12,12,12,8"/>
                    <StackPanel Margin="12">
                    <CheckBox x:ConnectionId='17' x:Name="UseDhcpCheckBox" Content="Use DHCP"                                                                        />
                    
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="IP Address:" VerticalAlignment="Center"/>
                        <TextBox x:ConnectionId='20' x:Name="IpAddressTextBox" Grid.Row="0" Grid.Column="1" Margin="8,0" Width="150" HorizontalAlignment="Left"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Netmask:" VerticalAlignment="Center"/>
                        <TextBox x:ConnectionId='21' x:Name="NetmaskTextBox" Grid.Row="1" Grid.Column="1" Margin="8,0" Width="150" HorizontalAlignment="Left"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Gateway:" VerticalAlignment="Center"/>
                        <TextBox x:ConnectionId='22' x:Name="GatewayTextBox" Grid.Row="2" Grid.Column="1" Margin="8,0" Width="150" HorizontalAlignment="Left"/>

                        <TextBlock x:ConnectionId='23' x:Name="Dns1Label" Grid.Row="3" Grid.Column="0" Text="Primary DNS:" VerticalAlignment="Center"/>
                        <TextBox x:ConnectionId='24' x:Name="Dns1TextBox" Grid.Row="3" Grid.Column="1" Margin="8,0" Width="150" HorizontalAlignment="Left"/>

                        <TextBlock x:ConnectionId='25' x:Name="Dns2Label" Grid.Row="4" Grid.Column="0" Text="Secondary DNS:" VerticalAlignment="Center"/>
                        <TextBox x:ConnectionId='26' x:Name="Dns2TextBox" Grid.Row="4" Grid.Column="1" Margin="8,0" Width="150" HorizontalAlignment="Left"/>
                    </Grid>

                    <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                        <Button x:ConnectionId='18' Content="Save Network Configuration"                                 HorizontalAlignment="Stretch" Margin="0,0,8,0"
                                Style="{StaticResource TealButtonStyle}"/>
                        <Button x:ConnectionId='19' Content="Load Current Settings"                                
                                Style="{StaticResource TealButtonStyle}"/>
                    </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Border>

            <Border BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" 
                    BorderThickness="1" 
                    CornerRadius="4" 
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    Padding="0"
                    Margin="0,0,0,16">
                <StackPanel>
                    <TextBlock Text="Modbus TCP Configuration" 
                               FontWeight="SemiBold" 
                               FontSize="16" 
                               Margin="12,12,12,8"/>
                    <StackPanel Margin="12">
                    <CheckBox x:ConnectionId='14' x:Name="ModbusEnabledCheckBox" Content="Enable Modbus TCP Server"/>
                    <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                        <Button x:ConnectionId='15' Content="Save Modbus Configuration"                                HorizontalAlignment="Stretch" Margin="0,0,8,0"
                                Style="{StaticResource TealButtonStyle}"/>
                        <Button x:ConnectionId='16' Content="Load Current Settings"                               
                                Style="{StaticResource TealButtonStyle}"/>
                    </StackPanel>
                    </StackPanel>
                </StackPanel>
            </Border>

            <Border BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" 
                    BorderThickness="1" 
                    CornerRadius="4" 
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    Padding="0"
                    Margin="0,0,0,16">
                <StackPanel>
                    <TextBlock Text="I2C Pull-up Configuration" 
                               FontWeight="SemiBold" 
                               FontSize="16" 
                               Margin="12,12,12,8"/>
                    <StackPanel Margin="12">
                        <CheckBox x:ConnectionId='12' x:Name="I2cPullupEnabledCheckBox" Content="Enable ESP32 Internal Pull-ups for I2C Bus"/>
                        <TextBlock Text="The ESP32 has weak internal pull-ups (~45kΩ) that can be enabled for the I2C bus. If your I2C devices (like Qwiic boards) already have external pull-ups (typically 4.7kΩ), you should disable the internal pull-ups. Using both internal and external pull-ups can cause bus issues. Default is disabled (use external pull-ups). Restart required for changes to take effect."
                                   Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"
                                   FontSize="12"
                                   TextWrapping="Wrap"
                                   Margin="0,8,0,0"/>
                        <Button x:ConnectionId='13' Content="Save I2C Configuration"                             
                                HorizontalAlignment="Left" 
                                Margin="0,12,0,0"
                                Style="{StaticResource TealButtonStyle}"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <Border BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" 
                    BorderThickness="1" 
                    CornerRadius="4" 
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    Padding="0"
                    Margin="0,0,0,16">
                <StackPanel>
                    <TextBlock Text="MPU6050 6-Axis IMU Configuration" 
                               FontWeight="SemiBold" 
                               FontSize="16" 
                               Margin="12,12,12,8"/>
                    <StackPanel Margin="12">
                        <CheckBox x:ConnectionId='4' x:Name="Mpu6050EnabledCheckBox" Content="Enable MPU6050 6-Axis IMU"
                                                                          
                                                                              />
                        <TextBlock Text="I2C address: 0x68. Restart required for changes to take effect."
                                   Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"
                                   FontSize="12"
                                   Margin="0,4,0,0"/>
                        
                        <StackPanel x:ConnectionId='5' x:Name="Mpu6050ConfigSection" Margin="0,8,0,0">
                            <TextBlock Text="Input Assembly 100 - Start Byte:"/>
                            <ComboBox x:ConnectionId='8' x:Name="Mpu6050ByteOffsetComboBox" Width="200" HorizontalAlignment="Left">
                                <ComboBoxItem Content="Byte 0" Tag="0"/>
                                <ComboBoxItem Content="Byte 1" Tag="1"/>
                                <ComboBoxItem Content="Byte 2" Tag="2"/>
                                <ComboBoxItem Content="Byte 3" Tag="3"/>
                                <ComboBoxItem Content="Byte 4" Tag="4"/>
                                <ComboBoxItem Content="Byte 5" Tag="5"/>
                                <ComboBoxItem Content="Byte 6" Tag="6"/>
                                <ComboBoxItem Content="Byte 7" Tag="7"/>
                                <ComboBoxItem Content="Byte 8" Tag="8"/>
                                <ComboBoxItem Content="Byte 9" Tag="9"/>
                                <ComboBoxItem Content="Byte 10" Tag="10"/>
                                <ComboBoxItem Content="Byte 11" Tag="11"/>
                                <ComboBoxItem Content="Byte 12" Tag="12"/>
                            </ComboBox>
                            <TextBlock Text="Device uses 20 bytes starting at this byte offset."
                                       Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"
                                       FontSize="12"
                                       Margin="0,4,0,0"/>

                            <TextBlock Text="Tool Weight (lbs):" Margin="0,12,0,0"/>
                            <TextBlock x:ConnectionId='9' x:Name="ToolWeightTextBlock" Text="1" FontSize="14" Margin="0,4,0,0" Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}"/>

                            <TextBlock Text="Tip Force (lbs):" Margin="0,12,0,0"/>
                            <TextBlock x:ConnectionId='10' x:Name="TipForceTextBlock" Text="1" FontSize="14" Margin="0,4,0,0" Foreground="{ThemeResource SystemControlForegroundBaseHighBrush}"/>

                            <TextBlock Text="Cylinder Bore (inches):" Margin="0,8,0,0"/>
                            <NumberBox x:ConnectionId='11' x:Name="CylinderBoreNumberBox" Minimum="0.1" Maximum="10.0" Value="1.0" Width="200" HorizontalAlignment="Left"/>
                        </StackPanel>

                        <StackPanel x:ConnectionId='6' x:Name="Mpu6050DisabledSection" Margin="0,8,0,0">
                            <TextBlock Text="Enable MPU6050 to configure byte offset" 
                                       Foreground="{ThemeResource SystemControlForegroundBaseMediumBrush}"
                                       FontSize="12"/>
                        </StackPanel>

                        <Button x:ConnectionId='7' Content="Save MPU6050 Settings"                                 
                                HorizontalAlignment="Left" 
                                Margin="0,12,0,0"
                                Style="{StaticResource TealButtonStyle}"/>
                    </StackPanel>
                </StackPanel>
            </Border>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Page>


